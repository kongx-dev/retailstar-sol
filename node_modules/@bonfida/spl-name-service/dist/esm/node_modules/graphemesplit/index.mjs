import{getDefaultExportFromCjs as n}from"../../_virtual/_commonjsHelpers.mjs";import{u as t}from"../unicode-trie/index.mjs";import{b as e}from"../js-base64/base64.mjs";import o from"./typeTrie.json.mjs";import r from"./extPict.json.mjs";import a from"./inCB.json.mjs";import{t as c}from"./types.mjs";const i=c,s=o.data,g=r.data,b=a.data,d=t,m=e.Base64,p=new d(m.toUint8Array(s)),_=new d(m.toUint8Array(g)),f=new d(m.toUint8Array(b));function l(n,t){return 0!==(n&t)}function C(n,t,e){const o=t.length;for(let r=e;r+1<o;r++){const o=t[r+0],a=t[r+1];switch(n.gb9c){case 0:l(o,i.InCB_Consonant)&&(n.gb9c=1);break;case 1:l(o,i.InCB_Extend)?n.gb9c=1:l(o,i.InCB_Linker)?n.gb9c=2:n.gb9c=l(o,i.InCB_Consonant)?1:0;break;case 2:l(o,i.InCB_Extend|i.InCB_Linker)?n.gb9c=2:n.gb9c=l(o,i.InCB_Consonant)?1:0}switch(n.gb11){case 0:l(o,i.Extended_Pictographic)&&(n.gb11=1);break;case 1:l(o,i.Extend)?n.gb11=1:l(o,i.ZWJ)?n.gb11=2:n.gb11=l(o,i.Extended_Pictographic)?1:0;break;case 2:n.gb11=l(o,i.Extended_Pictographic)?1:0}switch(n.gb12){case 0:l(o,i.Regional_Indicator)?n.gb12=1:n.gb12=-1;break;case 1:l(o,i.Regional_Indicator)?n.gb12=0:n.gb12=-1}switch(n.gb13){case 0:l(o,i.Regional_Indicator)||(n.gb13=1);break;case 1:l(o,i.Regional_Indicator)?n.gb13=2:n.gb13=1;break;case 2:n.gb13=1}if(!l(o,i.CR)||!l(a,i.LF)){if(l(o,i.Control|i.CR|i.LF))return r+1-e;if(l(a,i.Control|i.CR|i.LF))return r+1-e;if(!(l(o,i.L)&&l(a,i.L|i.V|i.LV|i.LVT)||l(o,i.LV|i.V)&&l(a,i.V|i.T)||l(o,i.LVT|i.T)&&l(a,i.T)||l(a,i.Extend|i.ZWJ)||l(a,i.SpacingMark)||l(o,i.Prepend)||l(a,i.InCB_Consonant)&&2===n.gb9c||l(a,i.Extended_Pictographic)&&2===n.gb11||l(a,i.Regional_Indicator)&&1===n.gb12||l(a,i.Regional_Indicator)&&2===n.gb13))return r+1-e}}return o-e}var u=n((function(n){const t=[],e=[0],o=[];for(let t=0;t<n.length;){const r=n.codePointAt(t);o.push(p.get(r)|_.get(r)|f.get(r)),t+=r>65535?2:1,e.push(t)}const r={gb9c:0,gb11:0,gb12:0,gb13:0};for(let a=0;a<o.length;){const c=C(r,o,a),i=e[a],s=e[a+c];t.push(n.slice(i,s)),a+=c}return t}));export{u as default};
//# sourceMappingURL=index.mjs.map
